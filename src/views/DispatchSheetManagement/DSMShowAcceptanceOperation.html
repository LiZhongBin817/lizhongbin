<title>受理操作</title>
<script type="text/html" template>
    <link rel="stylesheet" href="{{ layui.setter.base }}style/login.css?v={{ layui.admin.v }}-1" media="all">
</script>

<div class="layui-form" layui-filter="DSMShowOperation" id="ShowOperation" name="ShowOperation">
    <div class="layui-form-item">
        <table class="layui-hide" id="DSMShowAcceptanceOperationtable" lay-filter="DSMSAO">  </table>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">故障编号:</label>
        <div class="layui-inline">
            <script type="text/html" template>
                <input class="layui-input" type="text" name="ShowOperation_number" value="{{d.params[0].DSMNumber}}" disabled="disabled" autocomplete="off" />
            </script>
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">故障内容:</label>
        <div class="layui-inline">
            <script type="text/html" template>
                <input class="layui-input" type="text" name="ShowOperation_content" value="{{d.params[0].DSMContent}}" disabled="disabled" autocomplete="off" />
            </script>
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">上报时间:</label>
        <div class="layui-inline">
            <script type="text/html" template>
                <input class="layui-input" type="text" name="ShowOperation_time" value="{{d.params[1]}}" disabled="disabled" autocomplete="off" />
            </script>
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">派工:</label>
        <div class="layui-input-inline">
            <script type="text/html" template>
                <select name="ShowOperation_select" id="ShowOperation_select" lay-filter="DSMShowOperation_select" lay-search="">
                    <option value="">请选择</option>
                    {{# layui.each(d.params[2],function(index,item){ }}
                    <option value="{{ item.ID }}">{{ item.Name }}</option>
                    {{# }); }}
                </select>
            </script>
        </div>
        <div class="layui-input-inline">
            <input class="layui-btn layui-btn-sm" style="border-radius:3px;"  type="button" lay-submit name="DSMShowOperation-btn" id="DSMShowOperation-btn" value="该抄表员" />
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">最迟处理时间:</label>
        <div class="layui-inline">
            <input class="layui-input" type="text" name="ShowOperation_endtime" id="ShowOperation_endtime" autocomplete="off" lay-verify="ShowOperation_endtime" />
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">操作员:</label>
        <div class="layui-inline">
            <script type="text/html" template>
                <input class="layui-input" type="text" name="ShowOperation_Operationpeople" disabled="disabled" value="登录管理员" autocomplete="off" />
            </script>
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">操作时间:</label>
        <div class="layui-inline">
            <input class="layui-input" type="text" name="ShowOperation_operationtime" id="ShowOperation_operationtime" disabled="disabled" autocomplete="off" />
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label"></label>
        <div class="layui-input-inline">
            <input type="button" lay-submit lay-filter="DSMShowAcceptance_submit" style="border-radius:3px;" value="提交" class="layui-btn layui-btn-sm layui-btn-normal">
        </div>
        <div class="layui-input-inline">
            <input type="button" lay-submit lay-filter="DSMShowAcceptance_cancel" style="border-radius:3px;" value="取消" class="layui-btn layui-btn-sm">
        </div>
    </div>
</div>
<script>
    layui.use(['form', 'util', 'table', 'laydate', 'admin', 'view', 'layer', 'layedit', 'upload', 'jquery', 'DSMSHOW'], function () {
        var $ = layui.$,
            form = layui.form,
            table = layui.table,
            util = layui.util;
        table.render({
            elem: '#DSMShowAcceptanceOperationtable',
            url: layui.setter.requesturl + '/api/DispatchSheet/ShowFaultTable',
            method: 'post',
            cols: [[
                { field: 'DSMID', title: '序号', width: 100, sort: true, fixed: 'left' },
                { field: 'DSMNumber', title: '故障编号', width: 150 },
                {
                    field: 'DSMType', title: '故障类型', width: 100,
                    templet: function (d) {
                        if (d.DSMType == 6) {
                            return "表埋"
                        }
                        else if (d.DSMType == 7) {
                            return "表坏"
                        }
                        else if (d.DSMType == 8) {
                            return "井盖坏"
                        }
                        else if (d.DSMType == 10) {
                            return "漏水"
                        }
                        else {
                            return "其他"
                        }
                    }
                },
                { field: 'DSMContent', title: '故障内容', width: 100 },
                {
                    field: 'DSMTime', title: '上报时间', width: 100,
                    templet: function (d) {
                        return util.toDateString(d.DSMTime);
                    }
                },
                { field: 'DSMReportPerson', title: '上报人', width: 100 },
                {
                    field: 'DSMEnclosure', title: '附件', width: 100, event: 'Enclosure',
                    templet: function (d) {
                        return '<a  style="color: #c00;text-decoration:underline">' + d.DSMEnclosure + '</a>'
                    }
                },
                {
                    field: 'DSMStatus', title: '状态', width: 100,
                    templet: function (d) {
                        if (d.DSMStatus == 0) {
                            return "未受理"
                        }
                        else if (d.DSMStatus == 1) {
                            return "已受理"
                        }
                        else if (d.DSMStatus == 2) {
                            return "已处理"
                        }
                        else {
                            return "已存档"
                        }
                    }
                },
                {
                    field: 'DSMAddress', title: '位置信息', width: 100, event: 'Address',
                    templet: function (d) {
                        return '<a style="color: #c00;text-decoration:underline">' + d.DSMAddress + '</a>'
                    }
                }
            ]],
            page: true,
            limit: 10,
            limits: [10, 15, 20],
        });
        form.render();
    });
</script>